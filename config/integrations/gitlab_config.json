{
  "metadata": {
    "version": "1.0.0",
    "name": "GitLab Integration Configuration",
    "description": "GitLab integration for Private-Claude with CI/CD and Copilot",
    "last_updated": "2025-12-22T00:00:00Z",
    "environment": "production",
    "managed_by": "Agent 5.0"
  },

  "gitlab_connection": {
    "instance": "gitlab.com",
    "api_version": "v4",
    "api_url": "https://gitlab.com/api/v4",
    "group": "appsefilepro-group",
    "project": "appsefilepro-project",
    "full_path": "appsefilepro-group/appsefilepro-project",
    "visibility": "private",
    "authentication": {
      "method": "personal_access_token",
      "token_env_var": "GITLAB_TOKEN",
      "scopes": [
        "api",
        "read_api",
        "read_repository",
        "write_repository",
        "read_registry",
        "write_registry"
      ]
    }
  },

  "repository_settings": {
    "default_branch": "main",
    "description": "AI-powered automation and integration platform with Agent 5.0",
    "topics": ["ai", "automation", "agent", "e2b", "integration"],
    "auto_devops_enabled": true,
    "auto_devops_deploy_strategy": "continuous",
    "builds_access_level": "enabled",
    "issues_access_level": "enabled",
    "merge_requests_access_level": "enabled",
    "wiki_access_level": "enabled",
    "snippets_access_level": "enabled",
    "pages_access_level": "private",
    "container_registry_enabled": true,
    "packages_enabled": true,
    "lfs_enabled": true,
    "request_access_enabled": false,
    "only_allow_merge_if_pipeline_succeeds": true,
    "only_allow_merge_if_all_discussions_are_resolved": true,
    "remove_source_branch_after_merge": true,
    "printing_merge_request_link_enabled": true,
    "merge_method": "merge",
    "squash_option": "default_off",
    "allow_merge_on_skipped_pipeline": false,
    "restrict_user_defined_variables": false,
    "public_builds": false
  },

  "ci_cd_configuration": {
    "enabled": true,
    "config_file": ".gitlab-ci.yml",
    "runners": {
      "shared_runners_enabled": true,
      "group_runners_enabled": true,
      "allowed_shared_runners_tags": ["docker", "linux", "python"]
    },

    "pipeline_settings": {
      "auto_cancel_pending_pipelines": "enabled",
      "ci_config_path": ".gitlab-ci.yml",
      "ci_forward_deployment_enabled": true,
      "merge_pipelines_enabled": true,
      "merge_trains_enabled": false,
      "public_builds": false
    },

    "variables": {
      "PYTHON_VERSION": "3.11",
      "NODE_VERSION": "20",
      "PIP_CACHE_DIR": "$CI_PROJECT_DIR/.cache/pip",
      "NPM_CACHE_DIR": "$CI_PROJECT_DIR/.cache/npm",
      "DOCKER_DRIVER": "overlay2",
      "FF_USE_FASTZIP": "true",
      "CACHE_COMPRESSION_LEVEL": "fast",
      "GIT_DEPTH": "10",
      "GIT_STRATEGY": "fetch"
    },

    "cache_settings": {
      "enabled": true,
      "paths": [
        ".cache/pip",
        ".cache/npm",
        "node_modules/",
        "venv/"
      ],
      "policy": "pull-push",
      "fallback_keys": ["$CI_COMMIT_REF_SLUG", "main"]
    }
  },

  "merge_request_approvals": {
    "approvals_before_merge": 1,
    "reset_approvals_on_push": true,
    "disable_overriding_approvers_per_merge_request": false,
    "merge_requests_author_approval": false,
    "merge_requests_disable_committers_approval": true,
    "require_password_to_approve": false,

    "approval_rules": [
      {
        "name": "Code Review Required",
        "approvals_required": 1,
        "eligible_approvers": ["maintainer", "owner"],
        "applies_to_all_protected_branches": true
      },
      {
        "name": "Security Review for Main",
        "approvals_required": 2,
        "eligible_approvers": ["owner"],
        "protected_branches": ["main"]
      }
    ],

    "suggested_reviewers_enabled": true
  },

  "branch_protection": {
    "main": {
      "push_access_level": "maintainer",
      "merge_access_level": "maintainer",
      "unprotect_access_level": "admin",
      "allow_force_push": false,
      "code_owner_approval_required": true,
      "allowed_to_push": [],
      "allowed_to_merge": ["maintainer", "owner"],
      "allowed_to_unprotect": ["admin"]
    },
    "develop": {
      "push_access_level": "developer",
      "merge_access_level": "developer",
      "allow_force_push": false,
      "code_owner_approval_required": false
    },
    "release/*": {
      "push_access_level": "maintainer",
      "merge_access_level": "maintainer",
      "allow_force_push": false
    }
  },

  "webhooks": {
    "github_sync": {
      "url": "${GITHUB_WEBHOOK_URL}",
      "push_events": true,
      "tag_push_events": true,
      "merge_requests_events": true,
      "issues_events": true,
      "pipeline_events": true,
      "wiki_page_events": false,
      "deployment_events": true,
      "releases_events": true,
      "enable_ssl_verification": true,
      "token": "${GITLAB_WEBHOOK_SECRET}"
    },
    "zapier_automation": {
      "url": "${ZAPIER_WEBHOOK_GITLAB}",
      "push_events": true,
      "merge_requests_events": true,
      "issues_events": true,
      "pipeline_events": true,
      "enable_ssl_verification": true,
      "token": "${ZAPIER_WEBHOOK_SECRET}"
    },
    "e2b_integration": {
      "url": "${E2B_WEBHOOK_URL}",
      "push_events": true,
      "pipeline_events": true,
      "deployment_events": true,
      "enable_ssl_verification": true,
      "token": "${E2B_WEBHOOK_SECRET}"
    }
  },

  "gitlab_copilot": {
    "enabled": true,
    "provider": "gitlab",
    "features": {
      "code_suggestions": true,
      "code_completion": true,
      "chat_assistance": true,
      "code_review": true,
      "vulnerability_explanation": true
    },
    "settings": {
      "suggestion_threshold": 0.5,
      "max_suggestions": 5,
      "enable_multi_line": true,
      "enable_inline": true
    },
    "privacy": {
      "training_opt_out": true,
      "data_sharing": "minimal"
    }
  },

  "security_scanning": {
    "sast": {
      "enabled": true,
      "analyzers": [
        "bandit",
        "eslint",
        "semgrep"
      ],
      "excluded_paths": [
        "spec/",
        "test/",
        "tests/",
        "tmp/"
      ]
    },

    "dependency_scanning": {
      "enabled": true,
      "analyzers": [
        "gemnasium-python",
        "gemnasium-maven",
        "retire-js"
      ]
    },

    "secret_detection": {
      "enabled": true,
      "custom_rules": [
        {
          "id": "e2b_api_key",
          "description": "E2B API Keys",
          "regex": "e2b_[a-zA-Z0-9]{32,}"
        },
        {
          "id": "anthropic_api_key",
          "description": "Anthropic API Keys",
          "regex": "sk-ant-[a-zA-Z0-9\\-]{95,}"
        }
      ]
    },

    "container_scanning": {
      "enabled": false
    },

    "license_scanning": {
      "enabled": true,
      "approved_licenses": [
        "MIT",
        "Apache-2.0",
        "BSD-3-Clause",
        "ISC"
      ],
      "denied_licenses": [
        "GPL-3.0",
        "AGPL-3.0"
      ]
    }
  },

  "environments": {
    "production": {
      "external_url": "https://private-claude.app",
      "deployment_tier": "production",
      "auto_stop_in": null,
      "protected": true,
      "deploy_access_levels": ["maintainer", "owner"],
      "approval_rules": {
        "required_approvals": 2,
        "approvers": ["owner"]
      }
    },
    "staging": {
      "external_url": "https://staging.private-claude.app",
      "deployment_tier": "staging",
      "auto_stop_in": "7 days",
      "protected": false,
      "deploy_access_levels": ["developer", "maintainer", "owner"]
    },
    "development": {
      "external_url": "https://dev.private-claude.app",
      "deployment_tier": "development",
      "auto_stop_in": "3 days",
      "protected": false,
      "deploy_access_levels": ["developer", "maintainer", "owner"]
    }
  },

  "integrations": {
    "github_mirror": {
      "enabled": true,
      "source": "gitlab",
      "target": "github",
      "sync_direction": "bidirectional",
      "sync_events": [
        "push",
        "merge_request",
        "pull_request",
        "issues"
      ],
      "auto_sync": true,
      "sync_interval_minutes": 15
    },

    "slack": {
      "enabled": true,
      "webhook_url": "${SLACK_WEBHOOK_GITLAB}",
      "channel": "#gitlab-updates",
      "notify_on": [
        "pipeline_failed",
        "pipeline_success",
        "merge_request_created",
        "merge_request_merged"
      ],
      "branches_to_notify": ["main", "develop"]
    },

    "jira": {
      "enabled": false
    },

    "prometheus": {
      "enabled": false
    }
  },

  "repository_mirroring": {
    "github": {
      "enabled": true,
      "url": "https://github.com/appsefilepro-cell/Private-Claude.git",
      "direction": "pull",
      "authentication_method": "password",
      "username": "${GITHUB_USERNAME}",
      "password": "${GITHUB_TOKEN}",
      "only_protected_branches": false,
      "keep_divergent_refs": true,
      "mirror_trigger_builds": true,
      "mirror_overwrites_diverged_branches": false
    }
  },

  "auto_devops": {
    "enabled": true,
    "domain": "private-claude.app",
    "deploy_strategy": "continuous",
    "build_timeout": 3600,
    "test_timeout": 1800,
    "deploy_timeout": 900
  },

  "package_registry": {
    "enabled": true,
    "formats": [
      "pypi",
      "npm",
      "maven",
      "generic"
    ],
    "cleanup_policies": {
      "enabled": true,
      "keep_n_most_recent": 10,
      "older_than_days": 90,
      "name_regex_delete": ".*-snapshot",
      "name_regex_keep": ".*-release"
    }
  },

  "compliance": {
    "compliance_frameworks": [],
    "merge_request_compliance": {
      "prevent_approval_by_author": true,
      "prevent_approval_by_commit_author": true,
      "require_password_to_approve": false
    }
  },

  "monitoring": {
    "error_tracking": {
      "enabled": false
    },
    "metrics": {
      "enabled": true,
      "prometheus_enabled": false
    },
    "operations": {
      "incident_management": true,
      "alert_management": true
    }
  },

  "cost_optimization": {
    "pipeline_minutes_quota": 400,
    "shared_runners_minutes_limit": 400,
    "ci_pipeline_cache_ttl": 7,
    "ci_job_artifacts_retention": 30,
    "auto_stop_environments": true,
    "auto_delete_merged_branches": true
  },

  "gitlab_agent_5_sync": {
    "enabled": true,
    "sync_on_push": true,
    "sync_on_merge": true,
    "trigger_e2b_on_pipeline": true,
    "trigger_postman_tests": true,
    "notify_zapier": true,
    "update_github_status": true
  }
}
