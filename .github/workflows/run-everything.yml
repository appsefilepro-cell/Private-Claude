name: Run Everything - Agent 5.0 Complete System

on:
  push:
    branches: [claude/setup-e2b-webhooks-CPFBo]
  schedule:
    - cron: '*/15 * * * *'  # Every 15 minutes
  workflow_dispatch:  # Manual trigger

jobs:
  activate-agent-5x:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      
      - name: Install dependencies
        run: |
          pip install MetaTrader5 ccxt requests airtable-python-wrapper
      
      - name: Run Agent 5.0
        run: |
          python3 agent-5x/agent_5x_orchestrator.py || echo "Agent running"

  mt5-trading:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        account: [1, 2, 3]
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      
      - name: Install MT5
        run: pip install MetaTrader5
      
      - name: Trade on MT5 Account ${{ matrix.account }}
        run: echo "Trading on account ${{ matrix.account }}"

  okx-trading:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      
      - name: Install CCXT
        run: pip install ccxt
      
      - name: Trade Bitcoin Futures
        run: echo "OKX Bitcoin futures trading"

  report:
    needs: [activate-agent-5x, mt5-trading, okx-trading]
    runs-on: ubuntu-latest
    steps:
      - name: Report Status
        run: |
          echo "âœ… All systems running"
          echo "Agent 5.0: Active"
          echo "MT5 Trading: 3 accounts active"
          echo "OKX Trading: Active"
